<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="mall/header::head-fragment('青软商城-首页','index')">
</head>
<body>
<header th:replace="mall/header::header-fragment"></header>
<div class="headers-region"></div>
<div id="content">
    <nav th:replace="mall/header::nav-fragment"></nav>
    <div id="banner">
        <div class="all-sort-list">
            <ul>
                <th:block th:each="category:${categories}">
                    <li class="item">
                        <h3><span>·</span>
                            <a th:href="@{'/search.html?goodsCategoryId=' + ${category.category_id}}">
                                <th:block th:text="${category.category_name}"></th:block>
                            </a>
                        </h3>
                        <div class="item-list clearfix">
                            <div class="subitem">
                                <th:block th:each="goodsCategoryLevelSecond:${category.goodsCategoryLevelSeconds}">
                                    <dl class="fore1">
                                        <dt>
                                            <a th:href="@{'/search.html?goodsCategoryId=' + ${goodsCategoryLevelSecond.category_id}}">
                                                <th:block
                                                        th:text="${goodsCategoryLevelSecond.category_name}"></th:block>
                                            </a></dt>
                                        <dt><a href="##">
                                            <th:block></th:block>
                                        </a></dt>
                                        <dd>
                                            <th:block
                                                    th:each="goodsCategoryLevelThird:${goodsCategoryLevelSecond.goodsCategoryLevelThirds}">
                                                <em>
                                                    <a th:href="@{'/search.html?goodsCategoryId=' + ${goodsCategoryLevelThird.category_id}}">
                                                        <th:block
                                                                th:text="${goodsCategoryLevelThird.category_name}"></th:block>
                                                    </a>
                                                </em>
                                            </th:block>
                                        </dd>
                                    </dl>
                                </th:block>
                            </div>
                        </div>
                    </li>
                </th:block>
            </ul>
        </div>
        <div class="swiper-container fl">
            <div class="swiper-wrapper">
                <!--                 配置了轮播图则显示后台配置的轮播图 -->
                <th:block th:unless="${#lists.isEmpty(carousels)}">
                    <th:block th:each="carousel:${carousels}">
                        <div class="swiper-slide">
                            <a th:href="@{${carousel.redirect_url}}">
                                <img th:src="@{${carousel.carousel_url}}" alt="">

                            </a>
                        </div>
                    </th:block>
                </th:block>
                <!--                 未配置轮播图则显示默认的三张轮播图 -->
                <th:block th:if="${#lists.isEmpty(carousels)}">
                    <div class="swiper-slide">
                        <img src="/mall/image/swiper/banner01.jpg" alt="">
                    </div>
                    <div class="swiper-slide">
                        <img src="/mall/image/swiper/banner02.jpg" alt="">
                    </div>
                    <div class="swiper-slide">
                        <img src="/mall/image/swiper/banner03.jpg" alt="">
                    </div>
                </th:block>
            </div>
            <div class="swiper-pagination"></div>
            <div class="swiper-button-prev"></div>
            <div class="swiper-button-next"></div>
        </div>
    </div>
    <div id="hot">
        <h2>热销商品</h2>
        <ul>
            <!-- 已配置热销商品则显示配置内容 -->
            <th:block th:unless="${#lists.isEmpty(hot_goodsInfos)}">
                <th:block th:each="hot_goodsInfo:${hot_goodsInfos}">
                    <li>
                        <a th:href="@{'/goods/detail?goods_id=' + ${hot_goodsInfo.goods_id}}">
                            <img th:src="@{${hot_goodsInfo.goods_cover_img}}" th:alt="${hot_goodsInfo.goods_name}"
                                 th:title="${hot_goodsInfo.goods_name}">
                        </a>
                    </li>
                </th:block>
            </th:block>
            <!-- 未配置热销商品则显示默认 -->
            <th:block th:if="${#lists.isEmpty(hot_goodsInfos)}">
                <div class="hot-image">
                    <a href="##">
                        <img src="/mall/image/sub_banner/r4.jpg" alt="">
                    </a>
                </div>
                <div class="hot-image">
                    <a href="##">
                        <img src="/mall/image/sub_banner/hot2.jpg" alt="">
                    </a>
                </div>
                <div class="hot-image">
                    <a href="##">
                        <img src="/mall/image/sub_banner/hot3.jpg" alt="">
                    </a>
                </div>
                <div class="hot-image">
                    <a href="##">
                        <img src="/mall/image/sub_banner/hot4.jpg" alt="">
                    </a>
                </div>
            </th:block>
        </ul>
    </div>
    <div id="flash">
        <h2>新品上线</h2>
        <ul>
            <!-- 已配置新品则显示配置内容 -->
            <th:block th:unless="${#lists.isEmpty(new_goodsInfos)}">
                <th:block th:each="new_goodsInfo:${new_goodsInfos}">
                    <li>
                        <a th:href="@{'/goods/detail?goods_id=' + ${new_goodsInfo.goods_id}}">
                            <img th:src="${new_goodsInfo.goods_cover_img}" th:alt="${new_goodsInfo.goods_name}"
                                 th:title="${new_goodsInfo.goods_name}">
                            <p class="name" th:text="${new_goodsInfo.goods_name}">QSTMall</p>
                            <p class="discount" th:text="${new_goodsInfo.goods_intro}">QSTMall</p>
                            <p class="item_price" th:text="${'￥' + new_goodsInfo.original_price}">QSTMall</p>
                        </a>
                    </li>
                </th:block>
            </th:block>
            <!-- 未配置则显示默认 -->
            <th:block th:if="${#lists.isEmpty(new_goodsInfos)}">
                <li>
                    <a href="##">
                        <img src="/mall/image/sub_banner/m6.jpg" alt=""/>
                        <p class="name">华为平板 M6</p>
                        <p class="discount">醇香音质 身临其境</p>
                        <p class="price">1499元起</p>
                    </a>
                </li>
                <li>
                    <a href="##">
                        <img src="/mall/image/sub_banner/headphones.jpg" alt=""/>
                        <p class="name">蓝牙耳机</p>
                        <p class="discount">一键变声 原唱消音</p>
                        <p class="price">228元</p>
                    </a>
                </li>
                <li>
                    <a href="##">
                        <img src="/mall/image/sub_banner/pc.jpg" alt=""/>
                        <p class="name">15.6" i3笔记本</p>
                        <p class="discount">纤薄机身 金属材质</p>
                        <p class="price">3099元起</p>
                    </a>
                </li>
                <li>
                    <a href="##">
                        <img src="/mall/image/sub_banner/air.jpg" alt=""/>
                        <p class="name">空气净化器</p>
                        <p class="discount">大空间 快循环</p>
                        <p class="price">1099元起</p>
                    </a>
                </li>
                <li>
                    <a href="##">
                        <img src="/mall/image/sub_banner/baby-car.jpg" alt=""/>
                        <p class="name">折叠婴儿推车</p>
                        <p class="discount">出发去向往的地方</p>
                        <p class="price">649元起</p>
                    </a>
                </li>
            </th:block>
        </ul>
    </div>
    <div id="recommend">
        <h2>为你推荐</h2>
        <a href="##" class="more">查看更多>></a>
        <ul>
            <!-- 已配置推荐商品则显示配置内容 -->
            <th:block th:unless="${recommend_goodsInfos==null}">
                <th:block th:each="recommend_goodsInfo:${recommend_goodsInfos}">
                    <li>
                        <a th:href="@{'/goods/detail?goods_id=' + ${recommend_goodsInfo.goods_id}}">
                            <div class="info discount" th:text="${recommend_goodsInfo.tag}">
                                新品
                            </div>
                            <img th:src="@{${recommend_goodsInfo.goods_cover_img}}"
                                 th:alt="${recommend_goodsInfo.goods_name}"
                                 th:title="${recommend_goodsInfo.goods_name}">
                            <p class="name" th:text="${recommend_goodsInfo.goods_name}">QSTMall</p>
                            <p class="item_price" th:text="${'￥' + recommend_goodsInfo.original_price}">QSTMall</p>
                            <p class="counter">猜你喜欢</p>
                            <div class="comment">
                                <p>青软精选</p>
                                <p>好物也可以不贵</p>
                            </div>
                        </a>
                    </li>
                </th:block>
                <div id="test1" style="text-align: center"></div>
                <input type="hidden" id="index_count" th:value="${index_count}">
            </th:block>

            <!-- 未配置则显示默认 -->
            <th:block th:if="${recommend_goodsInfos==null}">
                <li>
                    <a href="##">
                        <div class="info discount">
                            新品
                        </div>
                        <img src="/mall/image/sub_banner/r1.jpg" alt=""/>
                        <p class="name">华为平板 M6</p>
                        <p class="price">1499元</p>
                        <p class="counter">猜你喜欢</p>
                        <div class="comment">
                            <p>新蜂精选</p>
                            <p>好物也可以不贵</p>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="##">
                        <div class="info discount">
                            5折起
                        </div>
                        <img src="/mall/image/sub_banner/r2.jpg" alt=""/>
                        <p class="name">华为平板 M6</p>
                        <p class="price">1499元</p>
                        <p class="counter">猜你喜欢</p>
                        <div class="comment">
                            <p>新蜂精选</p>
                            <p>好物也可以不贵</p>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="##">
                        <div class="info discount">
                            新品
                        </div>
                        <img src="/mall/image/sub_banner/r5.jpg" alt=""/>
                        <p class="name">华为平板 M6</p>
                        <p class="price">1499元</p>
                        <p class="counter">猜你喜欢</p>
                        <div class="comment">
                            <p>新蜂精选</p>
                            <p>好物也可以不贵</p>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="##">
                        <div class="info discount">
                            官降
                        </div>
                        <img src="/mall/image/sub_banner/m6.jpg" alt=""/>
                        <p class="name">华为平板 M6</p>
                        <p class="price">1499元</p>
                        <p class="counter">猜你喜欢</p>
                        <div class="comment">
                            <p>新蜂精选</p>
                            <p>好物也可以不贵</p>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="##">
                        <div class="info discount">
                            新品
                        </div>
                        <img src="/mall/image/sub_banner/r6.jpg" alt=""/>
                        <p class="name">华为平板 M6</p>
                        <p class="price">1499元</p>
                        <p class="counter">猜你喜欢</p>
                        <div class="comment">
                            <p>新蜂精选</p>
                            <p>好物也可以不贵</p>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="##">
                        <div class="info discount">
                            热销
                        </div>
                        <img src="/mall/image/sub_banner/r5.jpg" alt=""/>
                        <p class="name">华为平板 M6</p>
                        <p class="price">1499元</p>
                        <p class="counter">猜你喜欢</p>
                        <div class="comment">
                            <p>新蜂精选</p>
                            <p>好物也可以不贵</p>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="##">
                        <div class="info discount">
                            享折扣
                        </div>
                        <img src="/mall/image/sub_banner/r4.jpg" alt=""/>
                        <p class="name">华为平板 M6</p>
                        <p class="price">1499元</p>
                        <p class="counter">猜你喜欢</p>
                        <div class="comment">
                            <p>新蜂精选</p>
                            <p>好物也可以不贵</p>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="##">
                        <div class="info discount">
                            最低价
                        </div>
                        <img src="/mall/image/sub_banner/r3.jpg" alt=""/>
                        <p class="name">华为平板 M6</p>
                        <p class="price">1499元</p>
                        <p class="counter">猜你喜欢</p>
                        <div class="comment">
                            <p>新蜂精选</p>
                            <p>好物也可以不贵</p>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="##">
                        <div class="info discount">
                            热销
                        </div>
                        <img src="/mall/image/sub_banner/r2.jpg" alt=""/>
                        <p class="name">华为平板 M6</p>
                        <p class="price">1499元</p>
                        <p class="counter">猜你喜欢</p>
                        <div class="comment">
                            <p>新蜂精选</p>
                            <p>好物也可以不贵</p>
                        </div>
                    </a>
                </li>
                <!--                <li>-->
                <!--                    <a href="##">-->
                <!--                        <div class="info discount">-->
                <!--                            热销-->
                <!--                        </div>-->
                <!--                        <img src="/mall/image/sub_banner/r1.jpg" alt=""/>-->
                <!--                        <p class="name">华为平板 M6</p>-->
                <!--                        <p class="price">1499元</p>-->
                <!--                        <p class="counter">猜你喜欢</p>-->
                <!--                        <div class="comment">-->
                <!--                            <p>新蜂精选</p>-->
                <!--                            <p>好物也可以不贵</p>-->
                <!--                        </div>-->
                <!--                    </a>-->
                <!--                </li>-->
            </th:block>
        </ul>
    </div>
</div>
<div th:replace="mall/footer::footer-fragment"></div>


<!-- jQuery -->
<script th:src="@{/admin/plugins/jquery/jquery.js}"></script>
<script th:src="@{/mall/js/search.js}" type="text/javascript"></script>
<!-- jQuery UI 1.11.4 -->
<script th:src="@{/admin/plugins/jQueryUI/jquery-ui.min.js}"></script>
<!-- Bootstrap 4 -->

<script th:src="@{/admin/plugins/bootstrap/js/bootstrap.bundle.min.js}"></script>
<script th:src="@{/mall/js/swiper.min.js}" type="text/javascript"></script>
<script th:src="@{/admin/plugins/sweetalert/sweetalert.min.js}"></script>
<script th:src="@{/mall/js/index.js}" type="text/javascript"></script>

<script th:src="@{/layui/layui.js}" type="text/javascript"></script>
<script>
    layui.use('laypage', function () {
        var laypage = layui.laypage;
        laypage.render({
            elem: 'test1'
            , count: $("#index_count").val()//数据总数，从服务端得到
            , limit: 5
            , curr: location.hash.replace('#!fenye=', '') //获取起始页
            , hash: 'fenye' //自定义hash值
            , jump: function (obj, first) {
                //obj包含了当前分页的所有参数，比如：
                // console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。
                // console.log(obj.limit); //得到每页显示的条数

                //首次不执行
                if (!first) {
                    //do something
                    $.get("/index_recommend", {pageNum: obj.curr, pageSize: obj.limit}, function (data) {
                        location.reload();
                        // $('#recommend').replaceAll();
                    })
                }
            }
        });
    });
</script>


</body>
</html>